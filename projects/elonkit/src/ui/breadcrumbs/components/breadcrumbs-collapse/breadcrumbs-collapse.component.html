<button
  type="button"
  [matMenuTriggerFor]="menu"
  matRipple
  [attr.aria-label]="(locale$ | async)?.breadcrumbs?.labelMore"
  class="es-breadcrumbs-collapse">
  <div *ngIf="!moreTemplate" class="es-breadcrumbs-collapse__more">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M5 11.5C5 10.6716 5.67157 10 6.5 10C7.32843 10 8 10.6716 8 11.5C8 12.3284 7.32843 13 6.5 13C5.67157 13 5 12.3284 5 11.5ZM11 11.5C11 10.6716 11.6716 10 12.5 10C13.3284 10 14 10.6716 14 11.5C14 12.3284 13.3284 13 12.5 13C11.6716 13 11 12.3284 11 11.5ZM18.5 10C17.6716 10 17 10.6716 17 11.5C17 12.3284 17.6716 13 18.5 13C19.3284 13 20 12.3284 20 11.5C20 10.6716 19.3284 10 18.5 10Z"
        fill="black"
        fill-opacity="0.54" />
    </svg>
  </div>
  <ng-container *ngIf="moreTemplate">
    <ng-container *ngTemplateOutlet="moreTemplate"></ng-container>
  </ng-container>
</button>
<mat-menu #menu="matMenu" yPosition="below" class="es-breadcrumbs__menu">
  <ng-container *ngFor="let breadcrumb of breadcrumbs">
    <a *ngIf="!breadcrumb.data.breadcrumbs" mat-menu-item [routerLink]="[breadcrumb.path]" class="es-caption">
      <mat-icon *ngIf="breadcrumb.data.icon">{{ breadcrumb.data.icon }}</mat-icon>
      {{ breadcrumb.data.label }}
    </a>
    <ng-container *ngIf="breadcrumb.data.breadcrumbs">
      <button mat-menu-item [matMenuTriggerFor]="subMenu" class="es-caption">
        <mat-icon *ngIf="breadcrumb.data.icon">{{ breadcrumb.data.icon }}</mat-icon>
        {{ breadcrumb.data.label }}
      </button>
      <mat-menu #subMenu="matMenu" class="es-breadcrumbs__menu">
        <a
          *ngFor="let item of breadcrumb.data.breadcrumbs"
          mat-menu-item
          [routerLink]="[breadcrumb.parentPath, item.path]"
          class="es-caption">
          <mat-icon *ngIf="item.icon">{{ item.icon }}</mat-icon>
          <mat-icon *ngIf="item.svgIcon" [svgIcon]="item.svgIcon"></mat-icon>
          {{ item.label }}
        </a>
      </mat-menu>
    </ng-container>
  </ng-container>
</mat-menu>
